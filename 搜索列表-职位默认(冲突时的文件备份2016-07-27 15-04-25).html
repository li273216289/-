<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width"/>
    <title>脉聘-你的职业顾问</title>
    <link rel="stylesheet" type="text/css" href="css/common.css" />
    <link rel="stylesheet" type="text/css" href="css/animate.css" />
    <link rel="stylesheet" type="text/css" href="css/search.css" />
</head>
<body>
    <div class="index pd-top">
        <div class="top-search lr-mg">
            <a class="search-btn" href="javascript:;"></a>
            <input type="text" class="search-inp" placeholder="搜索职位或公司" id="j-search"/>
            
        </div>
        <div class="inp-sub">
        	<ul>
            	<li>产品经理</li>
                <li>产品经理</li>
                <li>产品经理</li>
                <li>产品经理</li>
                <li>产品经理</li>
                <li>产品经理</li>
                <li>产品经理</li>
            </ul>
        </div>
        <div class="screen-item lr-mg mg-bt">
            <div class="l-line-title">职位</div>
            <div class="screen j-screen">
                <div class="screen-hd">
                    <ul>
                        <li class="city">全重庆<i></i></li>
                        <li class="post">职位筛选<i></i></li>
                        <li class="indus">行业筛选<i></i></li>
                    </ul>
                </div>
                <div class="bd">
                    <p class="sub-title">公司行业性质</p>
                    <ul class="screen-city-list">
                        <li class="on">全重庆</li>
                        <li>重庆主城</li>
                        <li>彭水苗族彭水苗族</li>
                        <li>璧山县</li>
                        <li>璧山县</li>
                        <li>璧山县</li>
                        <li>彭水苗族彭水苗族</li>
                        <li>璧山县</li>
                        <li>璧山县</li>
                        <li>璧山县</li>
                    </ul>
                    <div class="btn-item">
                        <a class="close" href="javascript:;">取消</a>
                    </div>
                </div>
                <div class="bd">
                    <p class="sub-title">年薪范围</p>
                    <ul class="screen-industry-list j-pos">
                        <li class="on">不限<i></i></li>
                        <li>5万以下<i></i></li>
                        <li>5万以下<i></i></li>
                        <li>5万以下<i></i></li>
                        <li>5万以下<i></i></li>
                        <li>5万以下<i></i></li>
                    </ul>
                    <p class="sub-title">工作经验</p>
                    <ul class="screen-industry-list">
                        <li class="on">不限<i></i></li>
                        <li>应届生<i></i></li>
                        <li>1-3年<i></i></li>
                    </ul>
                    <div class="btn-item">
                        <a class="qd" href="javascript:;">确定</a>
                        <a class="cz" href="javascript:;">重置</a>
                    </div>
                </div>
                <div class="bd">
                    <p class="sub-title">公司行业性质</p>
                    <ul class="screen-industry-list j-ind">
                        <li class="on">不限<i></i></li>
                        <li>IT互联网<i></i></li>
                        <li>IT互联网<i></i></li>
                        <li>IT互联网<i></i></li>
                        <li>IT互联网<i></i></li>
                        <li>IT互联网<i></i></li>
                    </ul>
                    <div class="btn-item">
                        <a class="close" href="javascript:;">取消</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="job-list-item lr-mg">
            <ul>
                <li>
                    <p class="name">产品总监<i class="j">荐</i></p>
                    <p class="company">重庆微跑科技有限公司</p>
                    <p class="info">
                        <span>重庆，渝中区</span>
                        <span>8年</span>
                        <span>大专</span>
                        <span class="time">刷新时间：16-04-02</span>
                    </p>
                    <p class="salary">20-30 万<em>/年</em></p>
                </li>
                <li>
                    <p class="name">产品总监<i class="j">荐</i></p>
                    <p class="company">重庆微跑科技有限公司</p>
                    <p class="info">
                        <span>重庆，渝中区</span>
                        <span>8年</span>
                        <span>大专</span>
                        <span class="time">刷新时间：16-04-02</span>
                    </p>
                    <p class="salary">20-30 万<em>/年</em></p>
                </li>
                <li>
                    <p class="name">产品总监<i class="j">荐</i></p>
                    <p class="company">重庆微跑科技有限公司</p>
                    <p class="info">
                        <span>重庆，渝中区</span>
                        <span>8年</span>
                        <span>大专</span>
                        <span class="time">刷新时间：16-04-02</span>
                    </p>
                    <p class="salary">20-30 万<em>/年</em></p>
                </li>
                <li>
                    <p class="name">产品总监<i class="j">荐</i></p>
                    <p class="company">重庆微跑科技有限公司</p>
                    <p class="info">
                        <span>重庆，渝中区</span>
                        <span>8年</span>
                        <span>大专</span>
                        <span class="time">刷新时间：16-04-02</span>
                    </p>
                    <p class="salary">20-30 万<em>/年</em></p>
                </li>
            </ul>
        </div>
    </div>
    <div class="foot-nav">
        <ul>
            <li class="job on"><i></i><span>工作机会</span></li>
            <li class="my"><i></i><span>个人中心</span></li>
        </ul>
    </div>
    
    <script src="js/vendor/JQuery/jquery-1.9.0.js" type="text/javascript"></script>
    <script src="js/core/base.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){

            var _page = {
                 btn      : $('.j-screen .screen-hd li'),
                 cont     : $('.j-screen .bd'),
                 closeBtn : $('.close'),
                 cityItem : $('.screen-city-list li'),
                 city     : $('.city'),
                 posItem  : $('.j-pos li'),
                 qdBtn    : $('.qd'),
                 indItem  : $('.j-ind li'),
                 search   : $('#j-search'),
                 history  : $('.inp-sub'),
                 searchBtn: $('.search-btn'),


                 init:function(){

                    this.handle();
                 },

                 render:function(arr){
                    this.history.find('ul').html('');
                    var _html = [];
                    for(var i=0,len=arr.length;i<len;++i){
                        _html.push('<li>'+arr[i]+'</li>')
                    }
                    _html = _html.join('');
                    this.history.find('ul').html(_html);
                    // this.history.slideDown();
                 },

                 handle:function(){

                    var _this = this;

                    //点击展开事件
                    this.btn.click(function(){

                        var index = $(this).index();
                        _this.cont.hide();
                        _this.cont.eq(index).slideDown();
                    });

                    //取消事件
                    this.closeBtn.click(function(){

                        var _parent = $(this).parents('.bd');
                        
                        _parent.slideUp();
                    });

                    // 全重庆点击事件
                    this.cityItem.click(function(){

                        _this.cityItem.removeClass('on');
                        $(this).addClass('on');

                        var _parent = $(this).parents('.bd');
                        _parent.slideUp();

                        var html = $(this).html();
                        _this.city.html(html);
                    });

                    //职位筛选
                    this.posItem.click(function(){

                        var _siblings = $(this).siblings(); //兄弟节点
                        _siblings.removeClass('on');
                        $(this).addClass('on');
                    });

                    //确定事件
                    this.qdBtn.click(function(){

                         var _parent = $(this).parents('.bd');
                        
                        _parent.slideUp();

                    });
                    // 行业筛选
                    this.indItem.click(function(){

                        var _siblings = $(this).siblings(); //兄弟节点
                        _siblings.removeClass('on');
                        $(this).addClass('on');

                        var _parent = $(this).parents('.bd');
                        _parent.slideUp();

                    });

                    //存储搜索记录
                    this.searchBtn.click(function(){
                        var val = _this.search.val();

                        //不存取重复的记录
                        if(localStorage.historyList.indexOf(val) == -1){

                            localStorage.historyList += (val+',');    
                        }
                        

                    })
                    //职位搜索
                    this.search.keyup(function(){

                        if(localStorage.historyList){
                            //职位搜索
                            var val = $(this).val(),
                                reg = new RegExp("^.*"+val+".*$");

                            if(val == ''){
                                // _this.history.slideUp();
                                return;
                            }
                            var res = [],
                                tempArr = localStorage.historyList.split(',');
                            for(var i=0,len = tempArr.length;i<len;++i){
                                if(reg.test(tempArr[i])){
                                    res.push(tempArr[i]);
                                }
                            }
                            _this.render(res);
                            
                        }
                    });
                 }
            };

            _page.init();
        });
    </script>

</body>
</html>