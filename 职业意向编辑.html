<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width"/>
    <title>脉聘-你的职业顾问</title>
    <link rel="stylesheet" type="text/css" href="css/common.css" />
    <link rel="stylesheet" type="text/css" href="css/animate.css" />
    <link rel="stylesheet" type="text/css" href="css/intention.css" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
</head>
<body>
    <div class="index pd-top">
        <div class="attach-box lr-mg">
            <div class="l-line-title">职业意向</div>
            <div class="attach-item">
                <div class="attach-item-list">
                    <div class="attach-cont-item" id="j-indbtn">
                        <span class="tit-text">期望行业</span>
                        <span class="text-info"></span>
                        <a class="btn-open" href="javascript:;"></a>
                    </div>
                    <div class="attach-cont-item" id="j-occbtn">
                        <span class="tit-text">期望职能</span>
                        <span class="text-info"></span>
                        <a class="btn-open" href="javascript:;"></a>
                    </div>
                    <div class="attach-cont-item">
                        <span class="tit-text">期望城市</span>
                        <span class="text-info"></span>
                        <a class="btn-open" href="javascript:;"></a>
                    </div>
                    <div class="attach-cont-item">
                        <p class="tit-text">期望年薪</p>
                        <div class="salary-inp-item">
                            <span class="salary-inp-box">
                                <input class="inp w58" />
                                <span class="text">元/月</span>
                            </span>
                            <span class="text">X</span>
                            <span class="salary-inp-box">
                                <input class="inp w28" />
                                <span class="text">个月</span>
                            </span>
                            <span class="text">=123</span>
                        </div>
                        <a class="btn-open" href="javascript:;"></a>
                    </div>
                    <div class="attach-cont-item">
                        <p class="tit-text">目前年薪</p>
                        <div class="salary-inp-item">
                            <span class="salary-inp-box">
                                <input class="inp w58" />
                                <span class="text">元/月</span>
                            </span>
                            <span class="text">X</span>
                            <span class="salary-inp-box">
                                <input class="inp w28" />
                                <span class="text">个月</span>
                            </span>
                            <span class="text">=123</span>
                        </div>
                        <a class="btn-open" href="javascript:;"></a>
                    </div>
                    
                </div>
                
                <div class="btn-item">
                    <a class="orange-btn" href="#">保存</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="foot-nav">
        <ul>
            <li class="job on"><i></i><span>工作机会</span></li>
            <li class="my"><i></i><span>个人中心</span></li>
        </ul>
    </div>
    <!-- 期望行业弹层 -->
    <div class="pd-top box" id="j-ind">
        <div class="industry-list">
            <div class="bubble">
                <!-- <a href="javascript:;">这是汽泡<em>x</em></a>
                <a href="javascript:;">汽泡<em>x</em></a> -->
            </div>
            <ul class="list">
                <li><span>互联网/移动互联网/电子商务</span></li>
                <li class="on"><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
                <li><span>互联网/移动互联网</span></li>
            </ul>
            <ul class="sub-list">
                <li class="on"><span>专业服务专业服务专…</span><i class="ico"></i></li>
                <li><span>专业服务专业服务专…</span><i class="ico"></i></li>
                <li><span>专业服务</span><i class="ico"></i></li>
            </ul>
        </div>
        <div class="btn-item layer-btn" id="btn1">
            <a class="gary-btn" href="#">取消</a>
        </div>
    </div>
    <!-- 期望职能弹层 -->
    <div class="pd-top box" id="j-occ">
        <div class="industry-list">
            <div class="bubble">
                <!-- <a href="javascript:;">这是汽泡<em>x</em></a>
                <a href="javascript:;">汽泡<em>x</em></a> -->
            </div>
            <div class="listwrap">
                <ul class="list" tid = '0'>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                    <li><span>一级职能</span></li>
                </ul>
            </div>
            <div class="listwrap">
                <ul class="list" tid = '1'>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                    <li><span>二级职能</span></li>
                </ul>
            </div>
            <div class="listwrap">
                <ul class="list" tid = '2'>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                    <li><span>三级职能</span></li>
                </ul>
            </div>
        </div>
        <div class="btn-item layer-btn" id="btn2">
            <a class="gary-btn" href="#">取消</a>
        </div>
    </div>
    <script src="js/vendor/JQuery/jquery-1.9.0.js" type="text/javascript"></script>
    <script src="js/core/base.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            //期望行业
            var indBtn = $('#j-indbtn'),
                ind = $('#j-ind'),
                indItem = $('#j-ind li'),
                btn1  = $('#btn1'),
                btn2  = $('#btn2'),
                closeBtn = $('.bubble em'),
                bubble = $('.bubble'),
                occBtn = $('#j-occbtn'),
                occ = $('#j-occ'),
                occItem = $('#j-occ li');

            function init(){

                render($('#j-ind li.on'),bubble.eq(0));
                render($('#j-occ li.on'),bubble.eq(1));
                occinit();

            };

            function occinit(){
                var ul = occ.find('ul');
                ul.eq(2).slideUp();
                ul.eq(1).slideUp();
                ul.eq(0).slideDown();
                render($('#j-occ li.on'),bubble.eq(1));
            }

            function render(li,p){
                p.html('');
                var html = [];

                for(var i=0,len = li.length;i<len;++i){

                    var val = li.eq(i).find('span').html();

                    html.push('<a href="javascript:;">'+val+'<em>x</em></a>');
                };

                 html = html.join('');
                p.append(html);
            };

            init();
            indBtn.click(function(){
                ind.addClass('moveright');
                occinit();
            });
            indItem.click(function(){
                var _siblings = $(this).siblings();

                // if($(this).hasClass('on')){
                //     $(this).removeClass('on');
                //     return;
                // }
                if(!$(this).parent().hasClass('sub-list')){
                    _siblings.removeClass('on');
                }else{
                   if($(this).hasClass('on')){
                    $(this).removeClass('on');
                    render($('#j-ind li.on'),bubble.eq(0));
                    return;
                   } 
                }
                $(this).addClass('on');
                render($('#j-ind li.on'),bubble.eq(0));
            })
            btn1.click(function(){
                var res = ind.find('li.on'),
                    val = '';
                for(var i=0,len=res.length;i<len;++i){
                    val += res.eq(i).find('span').html()+' ';
                }
                indBtn.find('.text-info').html(val);
                ind.removeClass('moveright');
            });

            // ----------------------------
            // 期望职能
            occBtn.click(function(){
                occ.addClass('moveright');
            });

            occItem.click(function(){
                 var _siblings = $(this).siblings();

                $(this).addClass('on');
                _siblings.removeClass('on');

                var index = parseInt($(this).parent().attr('tid'), 10);
                
                var list = occ.find('.list');

                render($('#j-occ li.on'),bubble.eq(1));
                if(index == 2){
                    return;
                };
                list.eq(index).slideUp();
                list.eq(index+1).slideDown();
                
            });
            btn2.click(function(){

                var res = occ.find('li.on'),
                    val = '';
                for(var i=0,len=res.length;i<len;++i){
                    val += res.eq(i).find('span').html()+' ';
                }
                occBtn.find('.text-info').html(val);
                occ.removeClass('moveright');

            })
            //
            bubble.on('click','em',function(){
                var index = $(this).parent().index();

                if(index ==0){
                    return;
                }

                var parent = $(this).parents('.industry-list').find('li.on');

                parent.eq(index).removeClass('on');

                render($('#j-ind li.on'),bubble.eq(0));
                render($('#j-occ li.on'),bubble.eq(1));
            });
        });
    </script>
</body>
</html>